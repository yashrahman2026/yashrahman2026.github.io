<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Happy New Year 2025, My Love üíï</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: 'Georgia', serif;
            background: #0a0a1a;
            color: #fff;
            overflow-x: hidden;
            min-height: 100vh;
            touch-action: pan-y;
            position: relative;
        }

        /* Aurora Borealis Background */
        .aurora-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            z-index: 0;
            background: linear-gradient(to bottom, #0a0a1a 0%, #1a0a2e 50%, #2d1b3d 100%);
        }

        .aurora {
            position: absolute;
            width: 200%;
            height: 100%;
            top: 0;
            left: -50%;
            opacity: 0.6;
        }

        .aurora-1 {
            background: linear-gradient(90deg, 
                transparent 0%, 
                rgba(0, 255, 255, 0.3) 25%, 
                rgba(138, 43, 226, 0.3) 50%, 
                rgba(0, 255, 255, 0.3) 75%, 
                transparent 100%);
            animation: aurora-1 20s ease-in-out infinite;
            filter: blur(40px);
        }

        .aurora-2 {
            background: linear-gradient(90deg, 
                transparent 0%, 
                rgba(255, 105, 180, 0.3) 25%, 
                rgba(138, 43, 226, 0.3) 50%, 
                rgba(255, 105, 180, 0.3) 75%, 
                transparent 100%);
            animation: aurora-2 25s ease-in-out infinite;
            filter: blur(50px);
            animation-delay: -10s;
        }

        .aurora-3 {
            background: linear-gradient(90deg, 
                transparent 0%, 
                rgba(127, 255, 0, 0.2) 25%, 
                rgba(255, 0, 255, 0.2) 50%, 
                rgba(127, 255, 0, 0.2) 75%, 
                transparent 100%);
            animation: aurora-3 30s ease-in-out infinite;
            filter: blur(60px);
            animation-delay: -5s;
        }

        @keyframes aurora-1 {
            0%, 100% { transform: translateX(0) translateY(0) rotate(0deg); }
            50% { transform: translateX(20%) translateY(-10%) rotate(5deg); }
        }

        @keyframes aurora-2 {
            0%, 100% { transform: translateX(0) translateY(0) rotate(0deg); }
            50% { transform: translateX(-20%) translateY(10%) rotate(-5deg); }
        }

        @keyframes aurora-3 {
            0%, 100% { transform: translateX(0) translateY(0); }
            50% { transform: translateX(15%) translateY(-15%); }
        }

        /* Landing Page */
        .landing-page {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            background: linear-gradient(135deg, #1a0a2e 0%, #2d1b3d 50%, #4a1942 100%);
        }

        .landing-page.hidden {
            animation: fadeOut 1s forwards;
        }

        @keyframes fadeOut {
            to {
                opacity: 0;
                pointer-events: none;
            }
        }

        .heart-container {
            position: relative;
            width: 300px;
            height: 300px;
        }

        .big-heart {
            position: absolute;
            width: 300px;
            height: 300px;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        .big-heart:before,
        .big-heart:after {
            content: "";
            position: absolute;
            top: 0;
            width: 150px;
            height: 240px;
            background: linear-gradient(to bottom, rgba(255, 105, 180, 0.3), rgba(255, 105, 180, 0.1));
            border: 3px solid #ff69b4;
            border-radius: 150px 150px 0 0;
            transform: rotate(-45deg);
            transform-origin: 0 100%;
            box-shadow: 0 0 30px rgba(255, 105, 180, 0.6);
        }

        .big-heart:after {
            left: 150px;
            transform: rotate(45deg);
            transform-origin: 100% 100%;
        }

        .heart-fill {
            position: absolute;
            width: 300px;
            height: 300px;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            clip-path: polygon(0 100%, 100% 100%, 100% 100%, 0 100%);
            animation: fillHeart 3s ease-in-out forwards;
        }

        .heart-fill:before,
        .heart-fill:after {
            content: "";
            position: absolute;
            top: 0;
            width: 150px;
            height: 240px;
            background: linear-gradient(to bottom, #ff1493, #ff69b4);
            border-radius: 150px 150px 0 0;
            transform: rotate(-45deg);
            transform-origin: 0 100%;
        }

        .heart-fill:after {
            left: 150px;
            transform: rotate(45deg);
            transform-origin: 100% 100%;
        }

        @keyframes fillHeart {
            0% {
                clip-path: polygon(0 100%, 100% 100%, 100% 100%, 0 100%);
            }
            100% {
                clip-path: polygon(0 0, 100% 0, 100% 100%, 0 100%);
            }
        }

        .heart-name {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 2.5em;
            font-weight: bold;
            color: #fff;
            text-shadow: 0 0 20px rgba(255, 105, 180, 1), 0 0 40px rgba(255, 105, 180, 0.8);
            z-index: 10;
            animation: glow 2s ease-in-out infinite;
        }

        @keyframes glow {
            0%, 100% { text-shadow: 0 0 20px rgba(255, 105, 180, 1), 0 0 40px rgba(255, 105, 180, 0.8); }
            50% { text-shadow: 0 0 30px rgba(255, 105, 180, 1), 0 0 60px rgba(255, 105, 180, 1); }
        }

        /* Main Content */
        .main-content {
            opacity: 0;
            pointer-events: none;
            transition: opacity 1s;
        }

        .main-content.visible {
            opacity: 1;
            pointer-events: all;
        }

        /* Parallax Star Layers */
        .parallax-layer {
            position: fixed;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }

        .stars-far { z-index: 1; }
        .stars-mid { z-index: 2; }
        .stars-near { z-index: 3; }

        .star {
            position: absolute;
            background: white;
            border-radius: 50%;
            animation: twinkle 3s infinite;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 1; }
        }

        /* Shooting Stars */
        .shooting-star {
            position: fixed;
            width: 2px;
            height: 2px;
            background: white;
            border-radius: 50%;
            box-shadow: 0 0 10px 2px rgba(255, 255, 255, 0.8);
            z-index: 4;
            animation: shoot 3s linear;
            pointer-events: none;
        }

        .shooting-star::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 100px;
            height: 2px;
            background: linear-gradient(to left, rgba(255, 255, 255, 0.8), transparent);
        }

        @keyframes shoot {
            0% {
                transform: translateX(0) translateY(0);
                opacity: 1;
            }
            100% {
                transform: translateX(-300px) translateY(300px);
                opacity: 0;
            }
        }

        /* Moon Phase Display */
        .moon-container {
            position: fixed;
            top: 60px;
            left: 20px;
            z-index: 100;
            text-align: center;
        }

        .moon {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: linear-gradient(90deg, #f0f0f0 50%, #2d2d2d 50%);
            box-shadow: 0 0 30px rgba(255, 255, 255, 0.5);
            position: relative;
            overflow: hidden;
        }

        .moon-shadow {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at 30% 30%, transparent 30%, #2d2d2d 30%);
            border-radius: 50%;
        }

        .moon-label {
            margin-top: 10px;
            font-size: 12px;
            color: #ffa07a;
        }

        /* Audio Toggle Button */
        .audio-toggle {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 70px;
            height: 70px;
            background: linear-gradient(135deg, rgba(255, 105, 180, 0.3), rgba(138, 43, 226, 0.3));
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 105, 180, 0.5);
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            transition: all 0.3s ease;
            box-shadow: 0 0 20px rgba(255, 105, 180, 0.4);
        }

        .audio-toggle:hover {
            transform: scale(1.1);
            box-shadow: 0 0 30px rgba(255, 105, 180, 0.6);
        }

        .audio-toggle:active {
            transform: scale(0.95);
        }

        .audio-icon {
            font-size: 35px;
            transition: opacity 0.3s;
        }

        .audio-toggle.muted .audio-icon {
            opacity: 0.4;
            filter: grayscale(100%);
        }

        .container {
            position: relative;
            z-index: 5;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            text-align: center;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            transform-style: preserve-3d;
        }

        h1 {
            font-size: clamp(2em, 8vw, 4em);
            margin-bottom: 20px;
            background: linear-gradient(45deg, #ff6b9d, #ffa07a, #ff69b4);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: titleGlow 2s ease-in-out infinite;
            filter: drop-shadow(0 0 20px rgba(255, 105, 180, 0.5));
            transform: translateZ(50px);
        }

        @keyframes titleGlow {
            0%, 100% { filter: drop-shadow(0 0 20px rgba(255, 105, 180, 0.5)); }
            50% { filter: drop-shadow(0 0 30px rgba(255, 105, 180, 0.8)); }
        }

        .subtitle {
            font-size: clamp(1em, 4vw, 1.8em);
            margin-bottom: 40px;
            color: #ffa07a;
            font-style: italic;
            transform: translateZ(0);
        }

        .countdown-container {
            background: linear-gradient(135deg, rgba(255, 105, 180, 0.1), rgba(255, 182, 193, 0.05));
            backdrop-filter: blur(15px);
            border: 3px solid rgba(255, 105, 180, 0.4);
            border-radius: 30px;
            padding: clamp(20px, 5vw, 50px);
            margin: 40px auto;
            max-width: 90%;
            box-shadow: 0 15px 50px rgba(255, 105, 180, 0.3), inset 0 0 30px rgba(255, 105, 180, 0.1);
            transform: translateZ(20px);
        }

        .countdown-title {
            font-size: clamp(1.2em, 4vw, 2em);
            color: #ff69b4;
            margin-bottom: 30px;
            text-shadow: 0 0 15px rgba(255, 105, 180, 0.8);
            font-weight: bold;
        }

        .countdown {
            display: flex;
            justify-content: center;
            gap: clamp(10px, 3vw, 30px);
            flex-wrap: wrap;
            margin-top: 20px;
        }

        .time-unit {
            background: linear-gradient(135deg, rgba(255, 20, 147, 0.3), rgba(255, 105, 180, 0.2));
            border: 2px solid rgba(255, 105, 180, 0.6);
            border-radius: 20px;
            padding: clamp(15px, 3vw, 25px);
            min-width: clamp(80px, 20vw, 130px);
            box-shadow: 0 8px 25px rgba(255, 105, 180, 0.3), inset 0 0 20px rgba(255, 105, 180, 0.1);
            position: relative;
            overflow: hidden;
        }

        .time-unit:before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transform: rotate(45deg);
            animation: shimmer 3s infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%) rotate(45deg); }
            100% { transform: translateX(100%) rotate(45deg); }
        }

        .time-value {
            font-size: clamp(2em, 8vw, 3.5em);
            font-weight: bold;
            color: #fff;
            text-shadow: 0 0 20px rgba(255, 105, 180, 1), 0 5px 10px rgba(0, 0, 0, 0.5);
            position: relative;
            z-index: 1;
        }

        .time-label {
            font-size: clamp(0.8em, 2.5vw, 1.1em);
            color: #ffa07a;
            margin-top: 8px;
            text-transform: uppercase;
            letter-spacing: 2px;
            position: relative;
            z-index: 1;
        }

        .message-box {
            background: linear-gradient(135deg, rgba(255, 105, 180, 0.08), rgba(255, 182, 193, 0.05));
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 182, 193, 0.3);
            border-radius: 25px;
            padding: clamp(20px, 4vw, 40px);
            margin: 40px auto;
            max-width: 90%;
            line-height: 1.8;
            font-size: clamp(1em, 3vw, 1.3em);
            color: #ffc0cb;
            box-shadow: 0 10px 40px rgba(255, 105, 180, 0.2);
            display: none;
            transform: translateZ(30px);
        }

        .message-box.visible {
            display: block;
            animation: fadeIn 1s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px) translateZ(30px); }
            to { opacity: 1; transform: translateY(0) translateZ(30px); }
        }

        /* Beautiful Lanterns */
        .lantern {
            position: fixed;
            width: 50px;
            height: 70px;
            pointer-events: none;
            z-index: 6;
            animation: float-up 15s linear infinite;
        }

        .lantern-body {
            position: relative;
            width: 50px;
            height: 60px;
            background: linear-gradient(to right, rgba(255, 69, 0, 0.9), rgba(255, 140, 0, 0.8), rgba(255, 69, 0, 0.9));
            border-radius: 8px;
            box-shadow: 0 0 30px rgba(255, 140, 0, 0.9), inset 0 0 20px rgba(255, 200, 100, 0.5);
            border: 2px solid rgba(255, 215, 0, 0.6);
        }

        .lantern-top {
            position: absolute;
            top: -8px;
            left: 50%;
            transform: translateX(-50%);
            width: 30px;
            height: 8px;
            background: linear-gradient(to bottom, #8b4513, #654321);
            border-radius: 4px 4px 0 0;
        }

        .lantern-bottom {
            position: absolute;
            bottom: -12px;
            left: 50%;
            transform: translateX(-50%);
            width: 20px;
            height: 12px;
            background: linear-gradient(to bottom, #8b4513, #654321);
            border-radius: 0 0 8px 8px;
        }

        .lantern-flame {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 15px;
            height: 20px;
            background: radial-gradient(ellipse at center, #ffff00 0%, #ff8c00 50%, transparent 80%);
            border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
            animation: flicker 0.2s infinite alternate;
            filter: blur(1px);
        }

        @keyframes flicker {
            0% { 
                transform: translate(-50%, -50%) scale(1);
                opacity: 1;
            }
            100% { 
                transform: translate(-50%, -48%) scale(1.1);
                opacity: 0.9;
            }
        }

        .lantern-glow {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 80px;
            height: 80px;
            background: radial-gradient(circle, rgba(255, 140, 0, 0.4) 0%, transparent 70%);
            border-radius: 50%;
            animation: pulse-glow 2s infinite;
        }

        @keyframes pulse-glow {
            0%, 100% { transform: translate(-50%, -50%) scale(1); opacity: 0.6; }
            50% { transform: translate(-50%, -50%) scale(1.2); opacity: 0.8; }
        }

        .lantern-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 11px;
            font-weight: bold;
            color: #fff;
            text-shadow: 0 0 8px rgba(0, 0, 0, 0.9), 0 0 4px rgba(255, 215, 0, 0.8);
            z-index: 10;
            white-space: nowrap;
        }

        @keyframes float-up {
            0% {
                transform: translateY(100vh) translateX(0) rotate(0deg);
                opacity: 0;
            }
            5% {
                opacity: 1;
            }
            95% {
                opacity: 1;
            }
            100% {
                transform: translateY(-100vh) translateX(var(--drift)) rotate(360deg);
                opacity: 0;
            }
        }

        .firework {
            position: fixed;
            pointer-events: none;
            z-index: 100;
        }

        .firework-particle {
            position: absolute;
            width: 4px;
            height: 4px;
            border-radius: 50%;
            animation: explode 1.5s ease-out forwards;
        }

        @keyframes explode {
            0% {
                transform: translate(0, 0);
                opacity: 1;
            }
            100% {
                transform: translate(var(--tx), var(--ty));
                opacity: 0;
            }
        }

        .debug-menu {
            position: fixed;
            top: 10px;
            right: 10px;
            background: rgba(0, 0, 0, 0.95);
            border: 2px solid #ff69b4;
            border-radius: 10px;
            padding: 15px;
            z-index: 10000;
            font-size: 12px;
            max-width: 280px;
            max-height: 90vh;
            overflow-y: auto;
        }

        .debug-menu h3 {
            color: #ff69b4;
            margin-bottom: 10px;
            font-size: 14px;
        }

        .debug-menu button {
            background: linear-gradient(45deg, #ff6b9d, #ff69b4);
            border: none;
            color: white;
            padding: 8px 12px;
            margin: 5px 2px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            font-size: 11px;
            width: 100%;
        }

        .debug-menu button:active {
            background: linear-gradient(45deg, #ff69b4, #ff1493);
        }

        .debug-menu input[type="file"] {
            display: block;
            margin: 10px 0;
            color: #ffa07a;
            font-size: 10px;
        }

        .debug-menu label {
            color: #ffa07a;
            display: block;
            margin-top: 10px;
            font-size: 11px;
        }

        .celebration-message {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: clamp(2em, 8vw, 5em);
            font-weight: bold;
            color: #ff69b4;
            text-shadow: 0 0 30px rgba(255, 105, 180, 1);
            z-index: 200;
            opacity: 0;
            animation: gentlePulse 2s ease-in-out infinite;
            text-align: center;
            padding: 20px;
            pointer-events: none;
            transition: opacity 1s ease-in-out;
        }

        .celebration-message.visible {
            opacity: 1;
        }

        .celebration-message.fade-out {
            opacity: 0;
        }

        @keyframes gentlePulse {
            0%, 100% { transform: translate(-50%, -50%) scale(1); }
            50% { transform: translate(-50%, -50%) scale(1.05); }
        }

        .heart {
            position: fixed;
            width: 20px;
            height: 20px;
            transform: rotate(45deg);
            animation: float-hearts 4s ease-in-out infinite;
            pointer-events: none;
            z-index: 50;
            filter: drop-shadow(0 0 10px currentColor);
        }

        .heart:before,
        .heart:after {
            content: '';
            position: absolute;
            width: 20px;
            height: 20px;
            border-radius: 50%;
        }

        .heart:before {
            left: -10px;
            background: inherit;
        }

        .heart:after {
            top: -10px;
            background: inherit;
        }

        @keyframes float-hearts {
            0% {
                transform: translateY(100vh) rotate(45deg);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateY(-100vh) rotate(405deg);
                opacity: 0;
            }
        }

        @media (max-width: 768px) {
            .heart-container {
                width: 200px;
                height: 200px;
            }

            .big-heart {
                width: 200px;
                height: 200px;
            }

            .big-heart:before,
            .big-heart:after {
                width: 100px;
                height: 160px;
            }

            .big-heart:after {
                left: 100px;
            }

            .heart-fill {
                width: 200px;
                height: 200px;
            }

            .heart-fill:before,
            .heart-fill:after {
                width: 100px;
                height: 160px;
            }

            .heart-fill:after {
                left: 100px;
            }

            .heart-name {
                font-size: 1.8em;
            }

            .moon-container {
                top: 80px;
                left: 10px;
            }

            .moon {
                width: 60px;
                height: 60px;
            }

            .audio-toggle {
                width: 60px;
                height: 60px;
                bottom: 20px;
                right: 20px;
            }

            .audio-icon {
                font-size: 28px;
            }
        }

        @media (max-width: 480px) {
            .countdown {
                gap: 8px;
            }

            .time-unit {
                min-width: 70px;
                padding: 12px;
            }
        }
    </style>
</head>
<body>
    <!-- Aurora Borealis Background -->
    <div class="aurora-container">
        <div class="aurora aurora-1"></div>
        <div class="aurora aurora-2"></div>
        <div class="aurora aurora-3"></div>
    </div>

    <!-- Landing Page -->
    <div class="landing-page" id="landingPage">
        <div class="heart-container">
            <div class="big-heart"></div>
            <div class="heart-fill"></div>
            <div class="heart-name">TORY</div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="main-content" id="mainContent">
        <!-- Parallax Star Layers -->
        <div class="parallax-layer stars-far" id="starsFar"></div>
        <div class="parallax-layer stars-mid" id="starsMid"></div>
        <div class="parallax-layer stars-near" id="starsNear"></div>

        <!-- Audio Toggle -->
        <div class="audio-toggle" id="audioToggle" onclick="toggleAudio()">
            <div class="audio-icon">üåô</div>
        </div>

        <!-- <div class="debug-menu" id="debugMenu"> -->
        <!--     <h3>üéÆ Debug Menu</h3> -->
        <!--     <button onclick="skipToMidnight()">‚è© Skip to Midnight</button> -->
        <!--     <button onclick="testFireworks()">üéÜ Test Fireworks</button> -->
        <!--     <button onclick="testLanterns()">üèÆ Test Lanterns</button> -->
        <!--     <button onclick="testShootingStar()">‚≠ê Test Shooting Star</button> -->
        <!--     -->
        <!--     <label>Firework Audio:</label> -->
        <!--     <input type="file" id="fireworkAudio" accept="audio/*" onchange="loadFireworkAudio(this)"> -->
        <!--     -->
        <!--     <label>Rocket Audio:</label> -->
        <!--     <input type="file" id="rocketAudio" accept="audio/*" onchange="loadRocketAudio(this)"> -->
        <!--     -->
        <!--     <label>Ambient Audio:</label> -->
        <!--     <input type="file" id="ambientAudio" accept="audio/*" onchange="loadAmbientAudio(this)"> -->
        <!--      -->
        <!--     <button onclick="toggleDebug()">‚ùå Hide Menu</button> -->
        <!-- </div> -->

<div class="container">
<h1>‚ú® TAJBIHA KABIR TORY ‚ú®</h1>
<div class="subtitle">My Pakhi, My Shona, My Jaan üíï</div>
        <div class="countdown-container">
            <div class="countdown-title">Counting Down to Our New Year Together</div>
            <div class="countdown" id="countdown">
                <div class="time-unit">
                    <div class="time-value" id="days">00</div>
                    <div class="time-label">Days</div>
                </div>
                <div class="time-unit">
                    <div class="time-value" id="hours">00</div>
                    <div class="time-label">Hours</div>
                </div>
                <div class="time-unit">
                    <div class="time-value" id="minutes">00</div>
                    <div class="time-label">Minutes</div>
                </div>
                <div class="time-unit">
                    <div class="time-value" id="seconds">00</div>
                    <div class="time-label">Seconds</div>
                </div>
            </div>
        </div>

        <div class="message-box" id="messageBox">
            <p>As we count down to 2025, I'm counting all the reasons I love you...</p>
            <p>Every moment with you is a celebration, but tonight is extra special.</p>
            <p>Here's to another year of making beautiful memories together, my love.</p>
            <p style="margin-top: 20px; font-style: italic;">- Yash üíñ</p>
        </div>
    </div>

    <div class="celebration-message" id="celebrationMsg">
        üéä HAPPY NEW YEAR 2025, MY LOVE! üéä
    </div>
</div>

<script>
let effectsStartTime = 0;
const EFFECTS_DURATION = 5000; // 5 seconds

let activeRockets = [];
let activeFireworks = [];


    let fireworkSound = null;
    let rocketSound = null;
    let ambientSound = null;
    let celebrationMode = false;
    let countdownInterval = null;
    let celebrationInterval = null;
    let audioMuted = false;
const VOLUME = {
  ambient: 0.25,   // background music
  rocket:  0.45,   // launch sound
  firework: 0.35   // explosion
};

    const nicknames = ['Pakhi', 'Shona', 'Jaan', 'Toru', 'Shona Pakhi', 'Jaan Pakhi'];
    const heartColors = ['#ff69b4', '#ff1493', '#ff6b9d', '#00ffff', '#7fff00', '#ffa500', '#ff00ff', '#00ff00'];


// PATH-BASED AUDIO (no upload)
fireworkSound = new Audio('firework.mp3');
rocketSound   = new Audio('rocket.mp3');
ambientSound  = new Audio('ambient.mp3');

// preload
fireworkSound.preload = 'auto';
rocketSound.preload   = 'auto';
ambientSound.preload  = 'auto';
rocketSound.loop = false;
fireworkSound.loop = false;
ambientSound.loop = true; // this one IS supposed to loop



    // Landing page animation
    setTimeout(() => {
        document.getElementById('landingPage').classList.add('hidden');
        setTimeout(() => {
            document.getElementById('mainContent').classList.add('visible');
            initializeApp();
        }, 1000);
    }, 3500);

    // Parallax scroll effect
    window.addEventListener('scroll', () => {
        const scrollY = window.pageYOffset;
        const starsFar = document.getElementById('starsFar');
        const starsMid = document.getElementById('starsMid');
        const starsNear = document.getElementById('starsNear');
        
        if (starsFar) starsFar.style.transform = `translateY(${scrollY * 0.1}px)`;
        if (starsMid) starsMid.style.transform = `translateY(${scrollY * 0.3}px)`;
        if (starsNear) starsNear.style.transform = `translateY(${scrollY * 0.5}px)`;
    });

function toggleAudio() {
    audioMuted = !audioMuted;
    const toggle = document.getElementById('audioToggle');
    const icon = toggle.querySelector('.audio-icon');
    
    if (audioMuted) {
        toggle.classList.add('muted');
        icon.textContent = 'üéÜ';
        stopAllEffects();


        // stop ambient
        if (ambientSound) {
            ambientSound.pause();
            ambientSound.currentTime = 0;
        }

        // ‚õî stop ALL active rocket sounds
        activeRockets.forEach(s => {
            s.pause();
            s.currentTime = 0;
        });
        activeRockets = [];


    } else {
        toggle.classList.remove('muted');
        icon.textContent = 'üåô';

        // resume ambient only
        if (ambientSound && celebrationMode) {
            ambientSound.play().catch(() => {});
        }
    }
}


    function initializeApp() {
        createStars();
        countdownInterval = setInterval(updateCountdown, 1000);
        updateCountdown();
        
        setInterval(() => {
            if (!celebrationMode) createSimpleHeart();
        }, 3000);

        setInterval(() => createShootingStar(), 8000);
    }

    function createStars() {
        const starsFar = document.getElementById('starsFar');
        const starsMid = document.getElementById('starsMid');
        const starsNear = document.getElementById('starsNear');
        
        for (let i = 0; i < 50; i++) {
            const star = document.createElement('div');
            star.className = 'star';
            star.style.width = Math.random() * 2 + 'px';
            star.style.height = star.style.width;
            star.style.left = Math.random() * 100 + '%';
            star.style.top = Math.random() * 100 + '%';
            star.style.animationDelay = Math.random() * 3 + 's';
            starsFar.appendChild(star);
        }
        
        for (let i = 0; i < 30; i++) {
            const star = document.createElement('div');
            star.className = 'star';
            star.style.width = Math.random() * 2.5 + 1.5 + 'px';
            star.style.height = star.style.width;
            star.style.left = Math.random() * 100 + '%';
            star.style.top = Math.random() * 100 + '%';
            star.style.animationDelay = Math.random() * 3 + 's';
            starsMid.appendChild(star);
        }
        
        for (let i = 0; i < 20; i++) {
            const star = document.createElement('div');
            star.className = 'star';
            star.style.width = Math.random() * 3 + 2 + 'px';
            star.style.height = star.style.width;
            star.style.left = Math.random() * 100 + '%';
            star.style.top = Math.random() * 100 + '%';
            star.style.animationDelay = Math.random() * 3 + 's';
            starsNear.appendChild(star);
        }
    }

    function createShootingStar() {
        const star = document.createElement('div');
        star.className = 'shooting-star';
        star.style.left = Math.random() * 100 + '%';
        star.style.top = Math.random() * 50 + '%';
        document.body.appendChild(star);
        setTimeout(() => star.remove(), 3000);
    }

    function updateCountdown() {
        const now = new Date();
        const tomorrow = new Date(now);
        tomorrow.setDate(tomorrow.getDate() + 1);
        tomorrow.setHours(0, 0, 0, 0);
        
        const diff = tomorrow - now;
        
        if (diff <= 0) {
            clearInterval(countdownInterval);
            celebrate();
            return;
        }

        const days = Math.floor(diff / (1000 * 60 * 60 * 24));
        const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((diff % (1000 * 60)) / 1000);

        document.getElementById('days').textContent = String(days).padStart(2, '0');
        document.getElementById('hours').textContent = String(hours).padStart(2, '0');
        document.getElementById('minutes').textContent = String(minutes).padStart(2, '0');
        document.getElementById('seconds').textContent = String(seconds).padStart(2, '0');
    }

    function createSimpleHeart() {
        const heart = document.createElement('div');
        heart.className = 'heart';
        heart.style.left = Math.random() * 100 + '%';
        heart.style.animationDuration = (Math.random() * 2 + 3) + 's';
        const size = Math.random() * 10 + 15;
        heart.style.width = heart.style.height = size + 'px';
        heart.style.background = '#ff69b4';
        
        const style = document.createElement('style');
        style.textContent = `.heart:before, .heart:after { width: ${size}px; height: ${size}px; } .heart:before { left: ${-size/2}px; } .heart:after { top: ${-size/2}px; }`;
        heart.appendChild(style);
        
        document.body.appendChild(heart);
        setTimeout(() => heart.remove(), 7000);
    }

    function createColorfulHeart() {
        const heart = document.createElement('div');
        heart.className = 'heart';
        heart.style.left = Math.random() * 100 + '%';
        heart.style.animationDuration = (Math.random() * 2 + 3) + 's';
        const size = Math.random() * 10 + 15;
        heart.style.width = heart.style.height = size + 'px';
        
        const color = heartColors[Math.floor(Math.random() * heartColors.length)];
        heart.style.background = color;
        heart.style.filter = `drop-shadow(0 0 ${size}px ${color})`;
        
        const style = document.createElement('style');
        style.textContent = `.heart:before, .heart:after { width: ${size}px; height: ${size}px; } .heart:before { left: ${-size/2}px; } .heart:after { top: ${-size/2}px; }`;
        heart.appendChild(style);
        
        document.body.appendChild(heart);
        setTimeout(() => heart.remove(), 7000);
    }

    function createNicknameLantern() {
        const lantern = document.createElement('div');
        lantern.className = 'lantern';
        lantern.style.left = Math.random() * 100 + '%';
        lantern.style.setProperty('--drift', (Math.random() * 200 - 100) + 'px');
        lantern.style.animationDuration = (Math.random() * 5 + 12) + 's';
        
        const nickname = nicknames[Math.floor(Math.random() * nicknames.length)];
        
        lantern.innerHTML = `
            <div class="lantern-glow"></div>
            <div class="lantern-top"></div>
            <div class="lantern-body">
                <div class="lantern-flame"></div>
                <div class="lantern-text">${nickname}</div>
            </div>
            <div class="lantern-bottom"></div>
        `;
        
        document.body.appendChild(lantern);
        setTimeout(() => lantern.remove(), 20000);
    }

    function createFirework(x, y) {
        const colors = ['#ff69b4', '#ff1493', '#ffa07a', '#ff6b9d', '#ffb6c1', '#ff69ff', '#00ffff', '#7fff00'];
        const color = colors[Math.floor(Math.random() * colors.length)];
        
// ‚õî BLOCK firework audio after 5s
if (Date.now() - effectsStartTime <= EFFECTS_DURATION) {
    if (fireworkSound && !audioMuted) {
        const sound = fireworkSound.cloneNode();
        sound.volume = VOLUME.firework;
        sound.play().catch(() => {});
        activeFireworks.push(sound);
    }
}



        const firework = document.createElement('div');
        firework.className = 'firework';
        firework.style.left = x + 'px';
        firework.style.top = y + 'px';

        for (let i = 0; i < 40; i++) {
            const particle = document.createElement('div');
            particle.className = 'firework-particle';
            particle.style.background = color;
            particle.style.boxShadow = `0 0 10px ${color}`;
            
            const angle = (Math.PI * 2 * i) / 40;
            const velocity = Math.random() * 100 + 100;
            const tx = Math.cos(angle) * velocity;
            const ty = Math.sin(angle) * velocity;
            
            particle.style.setProperty('--tx', tx + 'px');
            particle.style.setProperty('--ty', ty + 'px');
            
            firework.appendChild(particle);
        }

        document.body.appendChild(firework);
        setTimeout(() => firework.remove(), 1500);
    }
function stopAllEffects() {
    activeRockets.forEach(s => {
        s.pause();
        s.currentTime = 0;
    });
    activeFireworks.forEach(s => {
        s.pause();
        s.currentTime = 0;
    });

    activeRockets = [];
    activeFireworks = [];
}


function launchRocket() {
    // ‚õî BLOCK after 5s
    if (Date.now() - effectsStartTime > EFFECTS_DURATION) return;

    if (rocketSound && !audioMuted) {
        const sound = rocketSound.cloneNode();
        sound.volume = VOLUME.rocket;
        sound.play().catch(() => {});
        activeRockets.push(sound);
    }

    const x = Math.random() * window.innerWidth;
    const endY = Math.random() * 300 + 100;

    setTimeout(() => createFirework(x, endY), 2500);
}




function celebrate() {
    celebrationMode = true;
    effectsStartTime = Date.now(); // ‚è± START CLOCK

    document.getElementById('celebrationMsg').classList.add('visible');
    setTimeout(() => document.getElementById('celebrationMsg').classList.add('fade-out'), 5000);
    document.getElementById('messageBox').classList.add('visible');

    if (ambientSound && !audioMuted) {
        ambientSound.loop = true;
        ambientSound.volume = VOLUME.ambient;
        ambientSound.play().catch(() => {});
    }

    celebrationInterval = setInterval(() => {
        for (let i = 0; i < 3; i++) {
            setTimeout(() => launchRocket(), i * 200);
        }
    }, 1000);

    setInterval(createNicknameLantern, 800);
    setInterval(createColorfulHeart, 400);
}


    function loadFireworkAudio(input) {
        if (input.files && input.files[0]) {
            const reader = new FileReader();
            reader.onload = function(e) {
                fireworkSound = new Audio(e.target.result);
                alert('Firework audio loaded!');
            };
            reader.readAsDataURL(input.files[0]);
        }
    }

    function loadRocketAudio(input) {
        if (input.files && input.files[0]) {
            const reader = new FileReader();
            reader.onload = function(e) {
                rocketSound = new Audio(e.target.result);
                alert('Rocket audio loaded!');
            };
            reader.readAsDataURL(input.files[0]);
        }
    }

    function loadAmbientAudio(input) {
        if (input.files && input.files[0]) {
            const reader = new FileReader();
            reader.onload = function(e) {
                ambientSound = new Audio(e.target.result);
                alert('Ambient audio loaded!');
            };
            reader.readAsDataURL(input.files[0]);
        }
    }

    function skipToMidnight() {
        if (countdownInterval) clearInterval(countdownInterval);
        if (celebrationInterval) clearInterval(celebrationInterval);
        celebrate();
    }

    function testFireworks() {
        for (let i = 0; i < 5; i++) {
            setTimeout(() => launchRocket(), i * 300);
        }
    }

    function testLanterns() {
        for (let i = 0; i < 10; i++) {
            setTimeout(() => createNicknameLantern(), i * 200);
        }
    }

    function testShootingStar() {
        for (let i = 0; i < 5; i++) {
            setTimeout(() => createShootingStar(), i * 500);
        }
    }

    function toggleDebug() {
        const menu = document.getElementById('debugMenu');
        menu.style.display = menu.style.display === 'none' ? 'block' : 'none';
    }

    document.addEventListener('keydown', (e) => {
        if (e.key === 'd' || e.key === 'D') {
            toggleDebug();
        }
    });
</script>
</body>
</html>

